{
  "hash": "f411bcdf31ae232e589a3c3cd81ae3fa",
  "result": {
    "engine": "knitr",
    "markdown": "# Imagery Data {#sec-imagery-data}\n\n\n\n\n\n\n\n\n::: {.cell}\n\n:::\n\n\n\n\n\n\n\n\n\n:::{.center}\n<!-- ![](img/swissimageRS.png){width=60%} -->\n:::\n\n\n## Images are Rasters\n\n- The spatial raster data model represents the world with the continuous grid of cells (a.k.a. pixels)\n- This data model often refers to so-called regular grids, in which each cell has the same, constant size \n- Through its inherent model this data is naturally fits into the *wide* data structure\n\n\n\n\n\n\n\n\n\n\n::: {.cell .column-page layout-nrow=\"1\"}\n::: {.cell-output-display}\n![Cell offset from origin (lower left)](lesson1-2-imagery_files/figure-html/fig-raster-example-1.png){#fig-raster-example-1 width=672}\n:::\n\n::: {.cell-output-display}\n![Cell values (for example elevation)](lesson1-2-imagery_files/figure-html/fig-raster-example-2.png){#fig-raster-example-2 width=672}\n:::\n\n::: {.cell-output-display}\n![Color representation of cell value](lesson1-2-imagery_files/figure-html/fig-raster-example-3.png){#fig-raster-example-3 width=672}\n:::\n:::\n\n\n\n\n\n\n\n\n\n:::{.callout-note collapse=\"true\"}\n\nWe will focus on the regular grids only. However, several other types of grids exist, including rotated, sheared, rectilinear, and curvilinear grids (see Chapter 1 of @edzer2023).\n\n:::\n\n\n\n## Types of raster data\n\n- Raster datasets usually represent continuous phenomena such as elevation, temperature, population density or spectral data. \n- Discrete features such as soil or land-cover classes can also be represented in the raster data model\n\n\n\n## A simple example: Elevation\n\n\n\n\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](lesson1-2-imagery_files/figure-html/unnamed-chunk-3-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n::: {.cell-output .cell-output-stdout}\n\n```\n      [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9] [,10] [,11]\n [1,]  275  282  373  342  357  326  372  318  400   243   303\n [2,]  230  318  316  351  345  346  359  331  395   225   288\n [3,]  164  337  258  342  363  350  349  320  395   280   321\n [4,]  168  337  261  354  358  364  339  377  368   309   284\n [5,]  202  322  250  380  362  373  327  393  360   379   326\n [6,]   NA  310  270  361  370  363  368  368  385   383   297\n [7,]   NA  277  310  291  375  365  375  355  343   407   220\n [8,]   NA  181  325  264  381  373  389  341  305   395   252\n [9,]   NA   NA  313  264  370  384  392  328  357   376   289\n[10,]   NA   NA  298  285  370  380  386  354  349   385   311\n[11,]  402   NA  333  293  356  382  376  391  329   352   361\n```\n\n\n:::\n:::\n\n\n\n\n\n\n\n\n\n## A more complex example: Spectral data\n\n- Typically, RS imagery consists of more than 1 band\n- In this case, the data is stored in a 3 dimensional *array* (where *band* is the 3rd-dimesion)\n- A RS image can contain any number of bands.\n- The most well known type of RS imagery consists of 3 Bands from the red, blue and green spectrum\n\n\n\n\n\n\n\n\n\n\n::: {.cell}\n\n:::\n\n::: {.cell .column-page layout-ncol=\"2\"}\n::: {.cell-output-display}\n![The bands stored internally](lesson1-2-imagery_files/figure-html/fig-multi-1.png){#fig-multi-1 width=672}\n:::\n\n::: {.cell-output-display}\n![The RGB Composite](lesson1-2-imagery_files/figure-html/fig-multi-2.png){#fig-multi-2 width=672}\n:::\n:::\n\n\n\n\n\n\n\n\n\n\n## Each band is a 2D matrix\n\n\n\n\n\n\n\n\n\n::: {.cell .column-page layout-nrow=\"1\"}\n::: {.cell-output-display}\n![Band values](lesson1-2-imagery_files/figure-html/fig-raster-composite-1.png){#fig-raster-composite-1 width=672}\n:::\n\n::: {.cell-output-display}\n![RGB True Color Image](lesson1-2-imagery_files/figure-html/fig-raster-composite-2.png){#fig-raster-composite-2 width=672}\n:::\n:::\n\n\n\n\n\n\n\n\n\n\n## Multispectral Datasets\n\n- Multiband datasets usually capture different parts of the EM spectrum\n- E.g. the Landsat image from the previous example has 6 bands capturing the following wavelengths:\n  - **Band 1**: Blue (0.45 - 0.52 µm)\n  - **Band 2**: Green (0.52 - 0.60 µm)\n  - **Band 3**: Red (0.63 - 0.69 µm)\n  - **Band 4**: Near-Infrared (0.77 - 0.90 µm)\n  - **Band 5**: Short-wave Infrared (1.55 - 1.75 µm)\n  - **Band 7**: Mid-Infrared (2.08 - 2.35 µm)\n\n\n## NirGB Image\n\n\n\n\n\n\n\n\n::: {.cell .column-page layout-nrow=\"1\"}\n::: {.cell-output-display}\n![Band values](lesson1-2-imagery_files/figure-html/fig-nirgb-1.png){#fig-nirgb-1 width=672}\n:::\n\n::: {.cell-output-display}\n![NIR-GB False Color Image](lesson1-2-imagery_files/figure-html/fig-nirgb-2.png){#fig-nirgb-2 width=672}\n:::\n:::\n\n\n\n\n\n\n\n\n\n\n## Representations of multispectral data\n\n- A *true color* image is created by using the Red (3), Green (2) and Blue (1) Band and mapping these to RGB\n- A *false color* image is created by mapping other bands to RGB\n\n\n\n\n\n\n\n\n\n::: {.cell layout-ncol=\"2\"}\n::: {.cell-output-display}\n![The R, G and B bands mapped to RGB](lesson1-2-imagery_files/figure-html/fig-rgb-nirgb-1.png){#fig-rgb-nirgb-1 width=672}\n:::\n\n::: {.cell-output-display}\n![NIR, G and B bands mapped to RGB](lesson1-2-imagery_files/figure-html/fig-rgb-nirgb-2.png){#fig-rgb-nirgb-2 width=672}\n:::\n:::\n\n\n\n\n\n\n\n\n\n\n## Tasks / Exercises\n\n\n1. The following command returns the path to a tif file on your hard drive:\n\n\n\n\n\n\n\n\n   ::: {.cell}\n   \n   ```{.r .cell-code}\n   system.file(\"ex/elev.tif\", package=\"terra\")\n   ```\n   :::\n\n\n\n\n\n\n\n   \n   Use this path to import the tif file using `rast()`, store it as `r`.\n   \n2. Explore this object:\n   - Determine the minimum and maximum eleveation values\n   - Make a static map using base plot and `tmap`\n   - Make an interactive map using tmap (`tmap_mode(\"view\")`)\n   - Using tmap, explore different [styles](https://r-tmap.github.io/tmap/reference/tm_raster.html#arg-style) and [palettes](https://r-tmap.github.io/tmap/reference/tm_raster.html#arg-palette). \n   \n3. The following command returns the path to a tif file on your hard drive:\n\n\n\n\n\n\n\n\n   ::: {.cell}\n   \n   ```{.r .cell-code}\n   system.file(\"tif/L7_ETMs.tif\",package = \"stars\")\n   ```\n   :::\n\n\n\n\n\n\n\n   Use this path to import the tif file using `rast()`, store it as `l7`.\n\n   \n4. Explore this object:\n   - Spot the differences to the object `r`\n   - Plot the available layers individually\n   - Rename the layers to: `c(\"B\", \"G\", \"R\", \"NIR\", \"SWIR\", \"MIR\")` (see [here](https://r-spatial.github.io/stars/reference/L7_ETMs.html))\n\n\n5. Select the Red Green and Blue bands to create a true color map (`plotRGB` and `tm_rgb`)\n\n\n\n\n\n\n\n\n::: {.cell}\n\n:::\n\n\n\n\n\n\n\n\n6. Select the NIR, Green and Blue bands to create a false color composite\n\n\n\n\n\n\n\n\n::: {.cell}\n\n:::\n",
    "supporting": [
      "lesson1-2-imagery_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}